The Laboratories of Dr. Creep
-----------------------------

A preview version. The game is actually finished, contains all the elements (and is at the token limit). What is still missing are various labs. There are currently only a handful, all are solvable. Compared to the original there are some changes, on the one hand because the layout is different (40x24 vs 16x16), on the other hand because I have defused some "backtracking" and death traps. Nevertheless, please note, the levels are from 1984 - there you have something different design.


Story
-----
So, you're looking for a place to work? Something special, challenging, with a good salary? Well, we have just the thing for you.
Many different options open for your inspection. Just step inside ... Oh? You want to leave already? I'm afraid that's simply not possible ... not until you have taken the complete tour.
You'll notice that we have all the modern conveniences. Electrostatic energy generators to warm things up. Piped-in music which I'm sure you will find quite haunting. Doors galore, and you never know what you will find on the other side. Once the death rays start lining up behind you, however, I know you will be eager to find out.
You may want to step lively over trap doors and through the force fields - we've lost several potential applicants that way. Over there, of course, is mummy's room. Mummy seems to be all wrapped up at the moment, but probably not for long. And a break room? At the Laboratories, all the rooms are restful, although many of the occupants are not.
Neighbours, you ask? I Know you will love them. Frankenstein's Monster just seems to pop up whenever you least expect him.
Well, I really must be leaving now. I'm sure you can find your way around. Don't be alarmed. There's a key in here somewhere. You will find your way out eventually... and if not, Doctor Creep will be back shortly and you can help him with his, ah, experiments.
Goodbye now ... and good luck.

Playing the game
----------------
You are captured in a Laboratories and your goal is to escape. 
Open a map with üÖæÔ∏è.
In the pause menu you can save a game state. Note that the status is stored before entering the room.

Obstacles
---------
Player
[gfx]0808000FF000000FF0000900F0000099990000099090000CC00000C00D0000C00D00[/gfx]

Doors and Doorbells
[gfx]1810000000000000008882000000000CC000000820822208200000CDDC0000082000000820000CD76CD000000000000000000CD66CD0088200000000882000CCCD0008220000000D8220000DD0000000000000CC000000000000008200000DDD82000000000000820000CCCC8200000000000000000DDDDD000000000000888200CCCCCC88820000000082220DDDDDDD8222CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCDDDDDDDDDDDDDDDDDDDDDDDD[/gfx]
One way to open a door is to use the doorbell. Operate the doorbell by standing in front of it and pressing the ‚ùé button. To go out an open door, stand in front of the door and press ‚¨ÜÔ∏è or ‚ùé.

Ladders
[gfx]08080050050000555500005005000055550000500500005555000050050000555500[/gfx]
To get on a ladder, stand directly behind it and push ‚¨ÜÔ∏è or ‚¨áÔ∏è. You can get off of a ladder whenever your feet are even with the front of a walkway.

Sliding Poles
[gfx]08080050050000555500005005000055550000500500005555000050050000555500[/gfx]
To get on a sliding pole, stand directly in front of it and pull ‚¨áÔ∏è. you cannot climb up the sliding poles. You can get off of a pole whenever your feet are even with the middle of a walkway.

Lightning Machine
[gfx]181800DCD100000000000000000000DCD1000000000000000000006CD500000000000000000000D76100000000000000000000DCD100000000000000000000DCD1000000000000000000006CD500000000000000000000D76100000000000000000000555500000000000000000005566550000000000000000005665550000000000000000005755750000000000000000005755750000000000000000000755570000000000000000007000070000000000000000007000007000000000000000007000007000000000007600000700007000000000AA76AA000700070000000000A0760A000770070000000000A7666A000700070000000000A0000A007000707000000000A0000A007000707000000000AAAAAA0070007000000000000000000[/gfx]
Turn the sparks on or off by standing in front of the switch and push ‚¨ÜÔ∏è,‚¨áÔ∏è,‚ùé.

Force Field
[gfx]10100000000000000000000CCC000000000000CCCD00000000000CCCD000000000000DDDF00000000000000F00000000000000F0F00000000000000F00000000000000F0F00000222200000F00000288888000F0F00028666628000F00002867772800F0F00028677728000F00002867772800F00000082222800000000000888800[/gfx]
Turn off the force field by standing in front of the control and pushing ‚ùé. The force field will remain off for a few seconds after the button is released.

Mummy
[gfx]201000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820888208882082000000000000000008208222082220820000000000000000000000000000000000000000000000000882222222228820000770000055510008220004444482200007700005100510000200444444800000007000051005100822044444448082077770000055510008228888888880820067700005551110000000000000000000077000000510000888208882088820006670000005100008222082220822200000700000051000[/gfx]
When you run in front of the ankh, the mummy slides out of its tomb. Mummies are
too stiff to use ladders or sliding poles.

Locks and Keys
[gfx]10080000000000DCCCD0DCD0000000CC0CC0CDCD00DC00C000C0C0DCCCCC00C000C0CDCD000000CC0CC0DCD0000000C000C00000000000C000C00000000000DCCCD0[/gfx]
To pick up a key, stand in front of it and push ‚ùé. You can open a lock only after you have picked up a key of matching color. Stand in front of the lock and push ‚ùé.

Ray Gun
[gfx]10080000000000DCCCD0DCD0000000CC0CC0CDCD00DC00C000C0C0DCCCCC00C000C0CDCD000000CC0CC0DCD0000000C000C00000000000C000C00000000000DCCCD0[/gfx]
Operate the gun by standing in front of the control and using ‚¨ÜÔ∏è and ‚¨áÔ∏è to aim and ‚ùé to fire. The gun fires automatically when it is at the same level as a player.

Matter Transmitter
[gfx]201000066666666666660000000000000000006666666666666B00000000000BB00006666666666666BB0000000000BBBB007777777777777BBB000000000BBBBB307777777777777BBB000000000BBBBB3077777BBB77777BBB0000000000BBB300777BBBBBBB777BBB0000000000033000770BBBBBBBB77BBB0000000000000000770BBBBBBBB77BBB0000000000000000770BBBBBBBB77BBB0000000000000000777BBBBBBB777BBB000000000000000077777BBB77777BBB00000000000000007777777777777CCCCCCCCCCCCCCCCCCC7777777777777CCCCCCCCCCCCCCCCCCC7777777777777CCCCCCCCCCCCCCCCCCCDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDDD[/gfx]
Stand in the booth and hold ‚¨ÜÔ∏è until the color in the booth matches the color of the desired receiver oval. Push ‚ùé to transmit.

Trapdoor
[gfx]1010000000000000000000000000000000000000000000000000000000000008800000000000008882000000000000882200000000000002200000000000000550000000000000555100000000000055110000000000000110000000000000000000CCDDDDDDCCCCCCCCCD00000CCCCCCCCCD00000CCCCCCCCCC000000DDDDDDDDDD[/gfx]
The trapdoor opens or closes whenever anyone runs in front of the control.

Frankensteins Monster
[gfx]08100000000000000000000099900009994000999440099944400AAA44400AAABB400AAAB4400AAA33400AAA33400AAA8840CAAA28CCCAAA28CCCAAACCCCDDDDDDDD[/gfx]
When you walk in front of his coffin, frankensteins monster awakens and begins to chase you. frankensteins monster is able to use the ladders and sliding poles.

Conveyor Belt
[gfx]0810000000000000000000000000000000000000000000B005000BB00550BB355551BB311551033005100030010000000000CCD0CCD0CD0CCD0CD0CCD0CCDDDDDDDD[/gfx]
To change the motion of the conveyor belt, stand in front of the control and push ‚ùé.

The exit Door
[gfx]10100000009A94000000000099A99944000000999AA9999444009999A7A9999944440A9400000000A9400A9400000004A9400A9400000099A9400A9400000444A9400A9400009999A9400A9400044444A9400A9400999999A9400A9404444444A940CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCDDDDDDDDDDDDDDDD[/gfx]
The door at the right leads out of the laboratory. When you go out this door you have escaped.


Editor
------
There is a editor, splitted in several files:
creep.p8 - the game - stand-alone
creepbuild.p8 - pack all the data and store it in creep.p8
creepedit.p8 - the level-editor

And some data - no lua code here. Also only parts of the p8 are packed from this files:
creep_endscreen.p8 - the End-Screen, must be placed completely in the shared gfx rom!
creep_levels.p8 - the level-data
creep_mainback.p8 - the main-menu background, must be placed completely in the shared gfx rom
creep_music.p8 - main-menu music. 
creep_sprites_sound.p8 - gfx (only 0x0000-0x1000), gfx-flags and sfx are used from here.

You need all the files to edit levels, for playing only the creep.p8

Note that when you save the level data, it is stored in "creep_levels.p8". When you want to test your level, you must run creepbuild.p8 or choose in the pause-menu "build".

There is a limit of 31 rooms and 15 of every object. First select a object with the keys, than place it with the left mouse button.

A switch can operate more than one machine. After placing a switch you can link the switch to a machine by simple click left on the machine. Right-click will quit link mode. To relink right click on a switch. 

Doorbells and locks work the same, link them with doors.

When you place a door, you must set an connected door. Move the room with + - < > or switch room over the map (tab) and place there the second door. When you place the second door in the same room you create an exit-door.

With tab you enter map mode. Move the cursor over one map and press tab again to enter the room. With left-click on a room you can move it, right click to resize it.

The best way to edit the labs is to open pico8 twice, once the editor and once the game. If you want to try something out, select "build" in the editor pause menu and then ctrl+r in the game to reload the changes.

Working with the editor
-----------------------
Important - keyboard is only detected, when the pico8-window is activ and the mouse cursor is in the window!

left mouse button --- set object or move the object under the cursor

right mouse button --- change size of object under the cursor or go through a door or start/stop linking object (switches, door bells or locks)

0-9 * / . , --- change state/color of the object, for example the color of the walk ways, active/deactivate, change direction and so on

backspace --- delete the active selected object. Important, when you delete a lightning machine or a door, you should check every machine, switch and doorbells - they may be invalid. 

space -- walk through door

w -- walkway
l -- ladder
s -- sliding poles
d -- door
b -- doorbell
o -- lock
k -- key
c -- conver belts
m -- lightning machine
i -- switch for lightning machine
f -- force field
t -- trapdoor
x -- matter transmitter booth
v -- transmitter destination
u -- mummy
r -- frankenstein monster
g -- ray gun

+ > -- next room
- < -- previous room

shift+r -- rename lab when you empty the name, the lab will be deleted.

shift+s -- save (but not build!) the level data.

shift+e shift+1 -- start position player 1

shift+w shift+2 -- start position player 2

tab -- enter map mode

ctrl+c -- export lab as clipboard-string

ctrl+v -- import lab from clipboard


behind the scenes
-----------------
Some may have guessed it already, the game is a "The Castle of Dr. Creep" clone. A classic on the C64 from 1984 and was quite unique at the time.

The original game is relatively complex and uses a complete floppy disk. The problem here is that I wanted to insert as many of the locks as possible. To put them "classically" in the map data does not work, much too large, so a level editor had to be created. Writing it in Pico8 was not so easy, it is almost more complex than the game.

A special feature of the level data is that I do not save byte wise, but bit wise. For example, to save the status of a trapdoor, I need exactly one bit. This method is also used for the game saves, otherwise it would be partly impossible to accommodate this in 256 bytes. However, I had to cheat a bit, for example, a round position of the creatures is stored. It is possible that a loaded game does not always remain solvable. But I think I've solved the problem.

In addition, I use the lzw logarithm to store even more data. it is possible to place data in source code via string, but somehow I find that inelegant. The packed data also has the advantage that it can be edited more easily with tools without changing the lua code.

Compared to the original castle, there are some changes, on the one hand because the layout is different (40x24 vs 16x16), on the other hand because I have defused some "backtracking" and death traps. Nevertheless, please note, the levels are from 1984 - there you have something different design.

The game should be similar to the original, but not just copy it. I've made some changes. The monsters, for example, always go at the closer player (in the original it was always player one). Likewise the map, in the original it appears after each level and you have to confirm it, I immediately switch here to the next room. This increases the game speed enormously.

The story text is a variant of the text on the back of the box. The object descriptions are variants of original tutorial.

sources
-------

The Castles of Dr. Creep Revisited
https://web.archive.org/web/20161223145535/http://baetzler.de/c64/games/creep/

Doctor Creep
http://moon.descentforum.net/creep/

music:
https://www.8notes.com/scores/998.asp?ftype=midi

Infos about the game:
https://www.mobygames.com/game/c64/castles-of-dr-creep

